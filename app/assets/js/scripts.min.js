/*!
 * fastshell
 * Fiercely quick and opinionated front-ends
 * https://HosseinKarami.github.io/fastshell
 * @author Hossein Karami
 * @version 1.0.5
 * Copyright 2016. MIT licensed.
 */
!function(e,t,o,n){"use strict";function i(){e(".toque-form").on("submit",function(){var t=m.child("messages");e(".toque-form").find(".js-toque-send").addClass("is-loading").attr("disabled",!0);var o=e(".toque-twitter").val().toString(),n=e(".toque-message").val().toString(),i=t.push();return i.set({tweetLink:o,text:n}),e(".toque-form").find(".js-toque-send").removeClass("is-loading").prop("disabled",!1),!1})}function s(){var e=m.getAuth();return!!e}function a(){e(".login-navbar").removeClass("hide"),e(".logout-navbar").removeClass("hide"),s()?(c(),e(".login-navbar").addClass("hide")):e(".logout-navbar").addClass("hide")}function r(e,t){e?console.log("Login Failed!",e):(console.log("Authenticated successfully with payload:",t),a())}function u(){e(".toque-login").on("submit",function(){var t=e(".login").val(),o=e(".password").val();return m.authWithPassword({email:t,password:o},r),!1}),e(".toque-logout").on("submit",function(t){return t.preventDefault(),m.unauth(),a(),e("#tweetList").html(""),!1})}function l(){e(".toque-register").on("submit",function(t){t.preventDefault();var o=e(".register").val(),n=e(".register-password").val();return m.createUser({email:o,password:n},function(e,t){e?console.log("Error creating user"):m.child("users").child(t.uid).set({email:o})}),!1})}function d(t){var o=e("#list-tweets").html(),n=Handlebars.compile(o),i=n(t);e("#tweetList").html(i)}function c(){var e=[];v.on("child_added",function(t){var o=t.val();e.push(o),d(e)})}var f,m=new Firebase("https://so1toque.firebaseio.com/"),v=new Firebase("https://so1toque.firebaseio.com/messages"),g={fire:function(e,t,o){var i=f;t=t===n?"init":t,""!==e&&i[e]&&"function"==typeof i[e][t]&&i[e][t](o)},loadEvents:function(){var t=o.body.id;g.fire("common"),e.each(o.body.className.split(/\s+/),function(e,o){g.fire(o),g.fire(o,t)}),g.fire("common","finalize")}};e(function(){e(o).ready(g.loadEvents),f={home:{init:function(){i()}},admin:{init:function(){a(),u(),l(),s()}}}})}(jQuery,window,document);