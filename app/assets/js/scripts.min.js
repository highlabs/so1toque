/*!
 * fastshell
 * Fiercely quick and opinionated front-ends
 * https://HosseinKarami.github.io/fastshell
 * @author Hossein Karami
 * @version 1.0.5
 * Copyright 2016. MIT licensed.
 */
!function(e,o,t,n){"use strict";function s(){e(".js-toque-send").on("click",function(o){o.preventDefault();var t=r.child("messages"),n=e(".toque-twitter").val(),s=e(".toque-message").val();t.push({tweetLink:n,text:s})})}function i(e,o){e?console.log("Login Failed!",e):console.log("Authenticated successfully with payload:",o)}function a(){e(".js-admin-login").on("click",function(o){o.preventDefault();var t=e(".login").val(),n=e(".password").val();r.authWithPassword({email:t,password:n},i)}),e(".js-admin-logout").on("click",function(e){e.preventDefault(),r.unauth()})}function l(){e(".js-admin-register").on("click",function(o){o.preventDefault();var t=e(".register").val(),n=e(".register-password").val();r.createUser({email:t,password:n},function(e){e?console.log("Error creating user:",e):console.log("success")}),r.onAuth(function(e){e&&r.child("users").child(e.uid).set({provider:e.provider,email:e.password.email})})})}function c(){var e=r.getAuth();e?(console.log("Authenticated user with uid:",e.uid),u()):console.log("not logged")}function u(){var o=[];d.on("child_added",function(t){var n=t.val();o.push(n),console.log(o);var s=e("#list-tweets").html(),i=Handlebars.compile(s),a=i(o);e("#tweetList").html(a)})}var r=new Firebase("https://so1toque.firebaseio.com/"),d=new Firebase("https://so1toque.firebaseio.com/messages");e(function(){s(),a(),l(),c()})}(jQuery,window,document);